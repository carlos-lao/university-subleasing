type Like @model @auth(rules: [{allow: public}]) {
  id: ID!
  user: ID! @index(name: "byUser")
  postID: ID! @index(name: "byListing")
}

type Comment @model @auth(rules: [{allow: public}]) {
  id: ID!
  post: ID! @index(name: "byListing")
  author: ID! @index(name: "byUser")
  respondingTo: ID
  content: String!
}

type User @model @auth(rules: [{allow: public}]) {
  id: ID!
  name: String!
  email: AWSEmail!
  picture: String!
  posts: [Listing] @hasMany(indexName: "byUser", fields: ["id"])
  comments: [Listing] @hasMany(indexName: "byUser", fields: ["id"])
  likes: [Listing] @hasMany(indexName: "byUser", fields: ["id"])
  gender: String!
  birthDate: AWSDate!
}

type Listing @model @auth(rules: [{allow: public}]) {
  id: ID!
  title: String!
  creator: ID! @index(name: "byUser")
  roomType: String!
  campus: String!
  address: String!
  rate: Int!
  negotiable: Boolean!
  startDate: AWSDate!
  endDate: AWSDate!
  photoDirectory: String!
  perks: AWSJSON!
  description: String
  propertyType: String!
  comments: [Comment] @hasMany(indexName: "byListing", fields: ["id"])
  likes: [Comment] @hasMany(indexName: "byListing", fields: ["id"])
}
 